<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36" version="27.1.5" pages="2">
  <diagram name="代码流程走读" id="XfOoIQ8wgLelwQRDHksd">
    <mxGraphModel dx="1139" dy="667" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="kYoe_I8JH5Og6u9T2peL-4" value="加载股票列表" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="40" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-5" target="kYoe_I8JH5Og6u9T2peL-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-5" value="all_a_ashare.txt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-6" value="加载天级因子列表，指示当日需要用的天级因子列表" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="120" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-7" target="kYoe_I8JH5Og6u9T2peL-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-7" value="daily_factor_required.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="120" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-8" value="加载日内因子列表，指示当日内不同时段需要用到的指标列表" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="200" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-9" target="kYoe_I8JH5Og6u9T2peL-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-9" value="factor_required.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="200" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-10" value="加载指标列表，表示每个时段需要使用哪些指标" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="280" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-11" target="kYoe_I8JH5Og6u9T2peL-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-11" value="indicator_required.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-13" value="使用 T-1 交易日配置信息获取固定有效位&amp;nbsp;fixed_universe" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="360" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-14" target="kYoe_I8JH5Og6u9T2peL-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-14" value="day_factors.csv (T-1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-15" value="拿到当天的调价因子&amp;nbsp;adjfactor" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="440" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-16" target="kYoe_I8JH5Og6u9T2peL-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-16" value="day_factors.csv (T)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="440" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-17" value="对于当前截面，获取时间 (94500000)&amp;nbsp;和&amp;nbsp;时段类型 (TD)" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="520" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-18" value="通过股票列表和 T-1&amp;nbsp;的 exposure.txt,&amp;nbsp;通过 v5_barra.get_hf_data 得到当日的各股 barra&amp;nbsp;行业因子暴露&amp;nbsp; hf_barra" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="600" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-19" target="kYoe_I8JH5Og6u9T2peL-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-19" value="exposure.txt (T-1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="620" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-57" value="" style="group;rounded=0;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="680" y="480" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-20" value="&lt;b&gt;hf_barra （type:&lt;i&gt;dict&lt;/i&gt;）&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-23" value="行业编号" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="20" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-24" value="2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="20" y="60" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-25" value="3" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="20" y="90" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-27" value="..." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="20" y="120" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-28" value="45" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="20" y="150" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-29" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="80" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-30" value="1" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="112.5" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-31" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="145" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-32" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="177.5" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-33" value="nan" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="210" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-34" value="..." style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="242.5" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-35" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="275" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-36" value="1" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="307.5" y="60" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-37" value="各个股票在该行业的暴露系数" style="rounded=0;whiteSpace=wrap;html=1;container=0;fontStyle=1" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="80" y="30" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-38" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="80" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-39" value="1" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="112.5" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-40" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="145" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-41" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="177.5" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-42" value="nan" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="210" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-43" value="..." style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="242.5" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-44" value="0" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="275" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-45" value="1" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="307.5" y="90" width="32.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-54" value="..." style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="80" y="120" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-55" value="..." style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-57">
          <mxGeometry x="80" y="150" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-60" value="计算当前分钟截面的&amp;nbsp;universe" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="800" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-61" target="kYoe_I8JH5Og6u9T2peL-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-61" value="当前 close&amp;nbsp;价格" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="830" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-62" target="kYoe_I8JH5Og6u9T2peL-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-62" value="当前 preclose&amp;nbsp;价格" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="770" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-63" target="kYoe_I8JH5Og6u9T2peL-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-63" value="根据股票代码生成每支票的涨跌幅门限列表" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="720" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-65" target="kYoe_I8JH5Og6u9T2peL-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-65" value="涨跌幅门限列表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="680" y="720" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-77" value="创建权重计算模块&amp;nbsp;model_score&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="920" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-78" target="kYoe_I8JH5Og6u9T2peL-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-78" value="score.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="890" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-79" target="kYoe_I8JH5Og6u9T2peL-77">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="270" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-79" value="T-1.signalScore.b.txt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="950" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-82" value="更新最新价格到权重计算模块中" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1000" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-83" target="kYoe_I8JH5Og6u9T2peL-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-83" value="当前 close&amp;nbsp;价格" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="1000" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-85" target="kYoe_I8JH5Og6u9T2peL-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-85" value="day_factors.csv (T)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="1060" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-87" target="kYoe_I8JH5Og6u9T2peL-89">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-87" value="调用权重计算模块的&amp;nbsp;get_model_weight(当前时间) 方法，得到模型权重&amp;nbsp;model_weight&amp;nbsp;字典，维护当前时点的所有模型权重值" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1080" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-88" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="680" y="960" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-89" value="&lt;b&gt;model_weight （type:&lt;i&gt;dict&lt;/i&gt;）&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-90" value="模型ID" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="20" y="30" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-91" value="td_factor_model_101" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="20" y="60" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-92" value="td_factor_model_105" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="20" y="90" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-93" value="..." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="20" y="120" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-94" value="td_factor_model_98" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="20" y="150" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-103" value="模型权重" style="rounded=0;whiteSpace=wrap;html=1;container=0;fontStyle=1" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="180" y="30" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-112" value="..." style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="180" y="120" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-113" value="0.047" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="180" y="150" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-114" value="0.037" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="180" y="90" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-115" value="0.031" style="rounded=0;whiteSpace=wrap;html=1;container=0;fillColor=#dae8fc;strokeColor=#000000;" vertex="1" parent="kYoe_I8JH5Og6u9T2peL-88">
          <mxGeometry x="180" y="60" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-116" value="拿到过去21天的交易日列表" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1200" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-117" target="kYoe_I8JH5Og6u9T2peL-119">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-117" value="加载过去 41&amp;nbsp;天的天级因子数据&amp;nbsp;daily_factors" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1280" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-118" value="调用&amp;nbsp;v5_pre_process&amp;nbsp;模块的 pre_process_v5_daily&amp;nbsp;方法，得到经过处理后的矩阵&amp;nbsp;processed_daily_factors" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1360" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-119" target="kYoe_I8JH5Og6u9T2peL-118">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="860" y="1345" />
              <mxPoint x="260" y="1345" />
              <mxPoint x="260" y="1390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-119" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;daily_factors (type: ndarray)&lt;/b&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(天级因子数)82 * (股票数)4590 * (天数)41&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1275" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-122" value="?" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="600" y="1380" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-123" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;processed_daily_factors&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(天级因子数)87 * (股票数)4590&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1375" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-125" target="kYoe_I8JH5Og6u9T2peL-126">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-125" value="拿到过去 21 天的 M5&amp;nbsp;粒度的历史指标数据&lt;div&gt;all_history_m5_indicator&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1470" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-126" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;all_history_m5_indicator&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(指标数)477 * (股票数)4590 * (总时点数 = 21*48)1008&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1475" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="kYoe_I8JH5Og6u9T2peL-128" target="kYoe_I8JH5Og6u9T2peL-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-128" value="拿到今天的 M5&amp;nbsp;粒度的指标数据&lt;div&gt;today_m5_indicator&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1550" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-129" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;today_m5_indicator&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(指标数)477 * (股票数)4590 * (今天时点数)3&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1555" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-131" value="历史的 M5 return，通过 adj_close_m5 的 pct_change 计算得到： history_m5_return" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1640" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-132" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;history_m5_return&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(股票数)4590 * (总时点数 = 21*48)1008&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1645" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-133" value="当日的 M5 return，通过 adj_close_m5 的 pct_change 计算得到： today_m5_return" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1720" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-134" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;today_m5_return&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(股票数)4590 * (今天时点数)3&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1725" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-135" value="根据当前时段 (TD) 需要的因子列表，获取历史的 M5 因子值： all_history_m5_factors" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1800" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-136" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;all_history_m5_factors&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(因子数)500 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(总时点数 = 21*48)1008&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1800" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-137" value="根据当前时段 (TD) 需要的因子列表，获取当日的 M5 因子值： today_m5_factor" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1880" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-138" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;today_m5_factor&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(因子数)500 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(今天时点数)3&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1880" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-139" value="拼接历史 M5 因子和当日 M5 因子，得到：&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;all_factor&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="1960" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-140" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;all_factor&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(因子数)500 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(历史+ 今日内时点数)1011&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="1965" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kYoe_I8JH5Og6u9T2peL-141" value="处理指标。遍历当前时段（TD）的每个子段（td_00, td_01 ...）：&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;1. 拿到这个子段对应的所需的指标列表，得到查询得到对应的指标数据 sliced_m5_indicator，转为 C 内存类型&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;2. 调用 v5_pre_process 模块的 pre_process_ind_function 类型，传入&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;sliced_m5_indicator 和&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;history_m5_return，计算得到处理后的 processed_data&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="280" y="2040" width="320" height="120" as="geometry" />
        </mxCell>
        <mxCell id="DBd82-l7cy3-Q9P9iBBS-2" value="&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;sliced_m5_indicator&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(子段的指标数)50 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(历史总时点数)1008&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="2040" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="DBd82-l7cy3-Q9P9iBBS-3" value="&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;&lt;b&gt;processed_data&amp;nbsp;&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(一个子段的固定规格)60 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(历史总时点数)1008&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="2120" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="DBd82-l7cy3-Q9P9iBBS-4" value="&lt;span style=&quot;color: rgb(0, 0, 0); text-align: left;&quot;&gt;&lt;b&gt;history_processed_indicator_np&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;text-align: left;&quot;&gt;(type: ndarray)&lt;/span&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(153, 0, 0);&quot;&gt;(所有子段的规格总和)588 * (股票数)4590 *&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(153, 0, 0); text-align: left; background-color: transparent;&quot;&gt;(历史总时点数)1008&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="2200" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="DBd82-l7cy3-Q9P9iBBS-5" value="将每个子段的 processed_data&lt;b&gt;&amp;nbsp;&lt;/b&gt;堆叠起来，得到合并后的处理过的历史指标数据 history_processed_indicator_np" style="rounded=0;whiteSpace=wrap;html=1;align=left;spacingLeft=5;spacingRight=5;spacingTop=2;spacingBottom=2;fillColor=#ffe6cc;strokeColor=#000000;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="280" y="2190" width="320" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="ZjJ2f4zmrpoJF42eUi3w" name="处理流程梳理">
    <mxGraphModel dx="1139" dy="667" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
